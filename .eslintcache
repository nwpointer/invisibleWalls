[{"/Users/test/Code/sandbox/three/3fiber/src/reportWebVitals.js":"1","/Users/test/Code/sandbox/three/3fiber/src/index.js":"2","/Users/test/Code/sandbox/three/3fiber/src/App.js":"3","/Users/test/Code/sandbox/three/3fiber/src/useKeyPress.js":"4","/Users/test/Code/sandbox/three/3fiber/src/Shoe.js":"5","/Users/test/Code/sandbox/three/3fiber/src/Building.js":"6"},{"size":362,"mtime":1610435767242,"results":"7","hashOfConfig":"8"},{"size":501,"mtime":1610435982918,"results":"9","hashOfConfig":"8"},{"size":4555,"mtime":1611635308733,"results":"10","hashOfConfig":"8"},{"size":959,"mtime":1610695654577,"results":"11","hashOfConfig":"8"},{"size":4435,"mtime":1610824682148,"results":"12","hashOfConfig":"8"},{"size":673,"mtime":1611217697204,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"5sb56j",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21","usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"24","usedDeprecatedRules":"16"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"27","usedDeprecatedRules":"28"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"/Users/test/Code/sandbox/three/3fiber/src/reportWebVitals.js",[],["31","32"],"/Users/test/Code/sandbox/three/3fiber/src/index.js",[],"/Users/test/Code/sandbox/three/3fiber/src/App.js",["33","34","35","36","37","38","39","40","41","42","43","44","45","46","47"],"import \"./App.scss\";\nimport React, { Suspense, useRef, useState, useEffect } from \"react\";\nimport useKeyPress from \"./useKeyPress\";\nimport { ContactShadows, Environment, useGLTF, OrbitControls } from \"drei\";\nimport Shoe from \"./Shoe\";\nimport Building from \"./Building\";\nimport debounce from \"lodash.debounce\";\nimport uniq from \"lodash.uniq\";\nimport pluck from \"lodash.pluck\";\nimport difference from \"lodash.difference\";\n\nimport { Canvas, useFrame, useThree } from \"react-three-fiber\";\nimport { Physics, useBox } from \"@react-three/cannon\";\nimport { Raycaster, Vector3, DoubleSide } from \"three\";\nimport { useCamera, PerspectiveCamera, Line } from \"@react-three/drei\";\nimport { Provider, atom, useAtom } from \"jotai\";\n\nconst facingAtom = atom([-5.3861516272095, 0, 5.483227951003158]);\n\nconst IP = [214, 214, 214];\n\nfunction App() {\n  return (\n    <>\n      <Canvas\n        concurrent\n        pixelRatio={[1, 1.5]}\n        colorManagement\n        orthographic\n        // camera={{ zoom: 10, position: [0, 100, 0] }}\n        camera={{ position: [10, 10, 10], fov: 1, zoom: 30 }}\n      >\n        <Provider>\n          <Physics gravity={[0, 0, 0]}>\n            <directionalLight intensity={2} position={[0, 0, 4]} />\n            <directionalLight intensity={0.5} position={[4, 0, 0]} />\n            <directionalLight intensity={4} position={[0, 4, 0]} />\n            <ambientLight intensity={0.2} />\n\n            <OrbitControls />\n\n            <Ruler />\n\n            <Me />\n\n            <mesh name=\"building\" position={[1, 1, 1]}>\n              <boxBufferGeometry attach=\"geometry\" args={[3, 3, 3, 1]} />\n              <meshStandardMaterial\n                attach=\"material\"\n                renderOrder={-9}\n                transparent={true}\n                opacity={1}\n                side={DoubleSide}\n                color=\"#000000\"\n              />\n            </mesh>\n\n            {/* <Building position={[0, 0, 0]} /> */}\n          </Physics>\n        </Provider>\n      </Canvas>\n    </>\n  );\n}\n\nconst Ruler = () => (\n  <>\n    <Line\n      points={[\n        [0, 0, 0],\n        [0, 0, 10],\n      ]}\n      color=\"white\"\n      position={[0, 0, 0]}\n    />\n    <Line\n      points={[\n        [0, 0, 0],\n        [0, 10, 0],\n      ]}\n      color=\"white\"\n      position={[0, 0, 0]}\n    />\n    <Line\n      points={[\n        [0, 0, 0],\n        [10, 0, 0],\n      ]}\n      color=\"white\"\n      position={[0, 0, 0]}\n    />\n  </>\n);\n\nconst useBetween = ({ scene, raycaster }) => (p, q) => {\n  const pq = new Vector3().copy(p).sub(q).normalize();\n  raycaster.set(q, pq);\n  return raycaster.intersectObjects(scene.children);\n};\n\nfunction uniqObjects(intersections) {\n  return uniq(pluck(intersections, \"object\"), \"id\");\n}\n\nconst setTransparency = (alpha) => (object) =>\n  (object.material.opacity = alpha);\n\nconst useTransparentOccludes = ({ ref }) => {\n  const { camera, scene, raycaster } = useThree();\n  const between = useBetween({ scene, raycaster });\n  const [occludes, setOccludes] = useState([]);\n  useFrame(() => {\n    if (raycaster.camera) {\n      const p = ref.current.position;\n      const q = camera.position;\n      let current = uniqObjects(between(q, p));\n      // objects no longer occluding should be opaque\n      difference(occludes, current).map(setTransparency(1));\n      // objects occluding should be transparent\n      current.map(setTransparency(0.5));\n      setOccludes(current);\n    }\n  });\n};\n\nconst useControls = ({ ref, speed = 1, api }) => {\n  const up = useKeyPress(\"w\");\n  const down = useKeyPress(\"s\");\n  const right = useKeyPress(\"d\");\n  const left = useKeyPress(\"a\");\n  const { camera } = useThree();\n\n  const X = 0;\n  const Y = 1;\n  const Z = 2;\n\n  let v = [0, 0, 0];\n\n  useFrame(() => {\n    if (up) v[Z] = -1;\n    if (down) v[Z] = 1;\n    if (right) v[X] = 1;\n    if (left) v[X] = -1;\n\n    // update the velocity of the object\n    ref.current.position.add(\n      new Vector3(...v).normalize().multiplyScalar(speed / 10)\n    );\n\n    // update the camera to follow and look at object\n    if (ref.current) {\n      camera.position.copy(ref.current.position).add(new Vector3(...IP));\n      camera.lookAt(ref.current.position);\n    }\n  });\n};\n\nfunction Me() {\n  const ref = useRef();\n  useTransparentOccludes({ ref });\n  useControls({ ref });\n  // return null;\n  return (\n    <mesh ref={ref} name=\"bob\" position={[1, 1, 1]}>\n      <boxBufferGeometry attach=\"geometry\" args={[1, 1, 1, 1]} />\n      <meshStandardMaterial\n        attach=\"material\"\n        transparent={true}\n        color=\"#000000\"\n      />\n    </mesh>\n  );\n}\n\nexport default App;\n","/Users/test/Code/sandbox/three/3fiber/src/useKeyPress.js",["48"],"import { useState, useEffect } from \"react\";\n\n// Hook\nexport default function useKeyPress(targetKey) {\n  // State for keeping track of whether key is pressed\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  // If pressed key is our target key then set to true\n  function downHandler({ key }) {\n    if (key === targetKey) {\n      setKeyPressed(true);\n    }\n  }\n\n  // If released key is our target key then set to false\n  const upHandler = ({ key }) => {\n    if (key === targetKey) {\n      setKeyPressed(false);\n    }\n  };\n\n  // Add event listeners\n  useEffect(() => {\n    window.addEventListener(\"keydown\", downHandler);\n    window.addEventListener(\"keyup\", upHandler);\n    // Remove event listeners on cleanup\n    return () => {\n      window.removeEventListener(\"keydown\", downHandler);\n      window.removeEventListener(\"keyup\", upHandler);\n    };\n  }, []); // Empty array ensures that effect is only run on mount and unmount\n\n  return keyPressed;\n}\n","/Users/test/Code/sandbox/three/3fiber/src/Shoe.js",["49","50","51","52"],"/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\n*/\n\nimport React, { useRef, useState, useEffect } from \"react\";\nimport { useGLTF } from \"@react-three/drei/useGLTF\";\nimport { proxy, useProxy } from \"valtio\";\nimport { useFrame } from \"react-three-fiber\";\n\nconst state = proxy({\n  current: null,\n  items: {\n    laces: \"#000000\",\n    mesh: \"#ffffff\",\n    caps: \"#ffffff\",\n    inner: \"#ffffff\",\n    sole: \"#ffffff\",\n    stripes: \"#ffffff\",\n    band: \"#ffffff\",\n    patch: \"#ffffff\",\n  },\n});\n\nexport default function Shoe(props) {\n  const ref = useRef();\n  const snap = useProxy(state);\n  const { nodes, materials } = useGLTF(\"/shoe-draco.glb\");\n\n  // Animate model\n  useFrame((state) => {\n    const t = state.clock.getElapsedTime();\n    ref.current.rotation.z = -0.2 - (1 + Math.sin(t / 1.5)) / 20;\n    ref.current.rotation.x = Math.cos(t / 4) / 8;\n    ref.current.rotation.y = Math.sin(t / 4) / 8;\n    ref.current.position.y = (1 + Math.sin(t / 1.5)) / 10;\n  });\n\n  // Cursor showing current color\n  const [hovered, set] = useState(null);\n  useEffect(() => {\n    const cursor = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#clip0)\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><g filter=\"url(#filter0_d)\"><path d=\"M29.5 47C39.165 47 47 39.165 47 29.5S39.165 12 29.5 12 12 19.835 12 29.5 19.835 47 29.5 47z\" fill=\"${snap.items[hovered]}\"/></g><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/><text fill=\"#000\" style=\"white-space:pre\" font-family=\"Inter var, sans-serif\" font-size=\"10\" letter-spacing=\"-.01em\"><tspan x=\"35\" y=\"63\">${hovered}</tspan></text></g><defs><clipPath id=\"clip0\"><path fill=\"#fff\" d=\"M0 0h64v64H0z\"/></clipPath><filter id=\"filter0_d\" x=\"6\" y=\"8\" width=\"47\" height=\"47\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\"><feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/><feColorMatrix in=\"SourceAlpha\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"/><feOffset dy=\"2\"/><feGaussianBlur stdDeviation=\"3\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\"/><feBlend in2=\"BackgroundImageFix\" result=\"effect1_dropShadow\"/><feBlend in=\"SourceGraphic\" in2=\"effect1_dropShadow\" result=\"shape\"/></filter></defs></svg>`;\n    const auto = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/></svg>`;\n    // document.body.style.cursor = hovered\n    //   ? `url('data:image/svg+xml;base64,${btoa(cursor)}, auto')`\n    //   : null;\n    document.body.style.cursor = hovered\n      ? `url('data:image/svg+xml;base64,${btoa(cursor)}'), auto`\n      : \"auto\";\n  }, [hovered]);\n\n  return (\n    <group\n      ref={ref}\n      dispose={null}\n      onPointerOver={(e) => (e.stopPropagation(), set(e.object.material.name))}\n      onPointerOut={(e) => e.intersections.length === 0 && set(null)}\n      onPointerMissed={() => (state.current = null)}\n      onPointerDown={(e) => (\n        e.stopPropagation(), (state.current = e.object.material.name)\n      )}\n    >\n      <mesh\n        geometry={nodes.shoe.geometry}\n        material={materials.laces}\n        material-color={snap.items.laces}\n      />\n      <mesh\n        geometry={nodes.shoe_1.geometry}\n        material={materials.mesh}\n        material-color={snap.items.mesh}\n      />\n      <mesh\n        geometry={nodes.shoe_2.geometry}\n        material={materials.caps}\n        material-color={snap.items.caps}\n      />\n      <mesh\n        geometry={nodes.shoe_3.geometry}\n        material={materials.inner}\n        material-color={snap.items.inner}\n      />\n      <mesh\n        geometry={nodes.shoe_4.geometry}\n        material={materials.sole}\n        material-color={snap.items.sole}\n      />\n      <mesh\n        geometry={nodes.shoe_5.geometry}\n        material={materials.stripes}\n        material-color={snap.items.stripes}\n      />\n      <mesh\n        geometry={nodes.shoe_6.geometry}\n        material={materials.band}\n        material-color={snap.items.band}\n      />\n      <mesh\n        geometry={nodes.shoe_7.geometry}\n        material={materials.patch}\n        material-color={snap.items.patch}\n      />\n    </group>\n  );\n}\n\nuseGLTF.preload(\"/shoe-draco.glb\");\n",["53","54"],"/Users/test/Code/sandbox/three/3fiber/src/Building.js",[],{"ruleId":"55","replacedBy":"56"},{"ruleId":"57","replacedBy":"58"},{"ruleId":"59","severity":1,"message":"60","line":2,"column":17,"nodeType":"61","messageId":"62","endLine":2,"endColumn":25},{"ruleId":"59","severity":1,"message":"63","line":2,"column":45,"nodeType":"61","messageId":"62","endLine":2,"endColumn":54},{"ruleId":"59","severity":1,"message":"64","line":4,"column":10,"nodeType":"61","messageId":"62","endLine":4,"endColumn":24},{"ruleId":"59","severity":1,"message":"65","line":4,"column":26,"nodeType":"61","messageId":"62","endLine":4,"endColumn":37},{"ruleId":"59","severity":1,"message":"66","line":4,"column":39,"nodeType":"61","messageId":"62","endLine":4,"endColumn":46},{"ruleId":"59","severity":1,"message":"67","line":5,"column":8,"nodeType":"61","messageId":"62","endLine":5,"endColumn":12},{"ruleId":"59","severity":1,"message":"68","line":6,"column":8,"nodeType":"61","messageId":"62","endLine":6,"endColumn":16},{"ruleId":"59","severity":1,"message":"69","line":7,"column":8,"nodeType":"61","messageId":"62","endLine":7,"endColumn":16},{"ruleId":"59","severity":1,"message":"70","line":13,"column":19,"nodeType":"61","messageId":"62","endLine":13,"endColumn":25},{"ruleId":"59","severity":1,"message":"71","line":14,"column":10,"nodeType":"61","messageId":"62","endLine":14,"endColumn":19},{"ruleId":"59","severity":1,"message":"72","line":15,"column":10,"nodeType":"61","messageId":"62","endLine":15,"endColumn":19},{"ruleId":"59","severity":1,"message":"73","line":15,"column":21,"nodeType":"61","messageId":"62","endLine":15,"endColumn":38},{"ruleId":"59","severity":1,"message":"74","line":16,"column":26,"nodeType":"61","messageId":"62","endLine":16,"endColumn":33},{"ruleId":"59","severity":1,"message":"75","line":18,"column":7,"nodeType":"61","messageId":"62","endLine":18,"endColumn":17},{"ruleId":"59","severity":1,"message":"76","line":134,"column":9,"nodeType":"61","messageId":"62","endLine":134,"endColumn":10},{"ruleId":"77","severity":1,"message":"78","line":31,"column":6,"nodeType":"79","endLine":31,"endColumn":8,"suggestions":"80"},{"ruleId":"59","severity":1,"message":"81","line":42,"column":11,"nodeType":"61","messageId":"62","endLine":42,"endColumn":15},{"ruleId":"77","severity":1,"message":"82","line":49,"column":6,"nodeType":"79","endLine":49,"endColumn":15,"suggestions":"83"},{"ruleId":"84","severity":1,"message":"85","line":55,"column":49,"nodeType":"86","messageId":"87","endLine":55,"endColumn":50},{"ruleId":"84","severity":1,"message":"85","line":59,"column":28,"nodeType":"86","messageId":"87","endLine":59,"endColumn":29},{"ruleId":"55","replacedBy":"88"},{"ruleId":"57","replacedBy":"89"},"no-native-reassign",["90"],"no-negated-in-lhs",["91"],"no-unused-vars","'Suspense' is defined but never used.","Identifier","unusedVar","'useEffect' is defined but never used.","'ContactShadows' is defined but never used.","'Environment' is defined but never used.","'useGLTF' is defined but never used.","'Shoe' is defined but never used.","'Building' is defined but never used.","'debounce' is defined but never used.","'useBox' is defined but never used.","'Raycaster' is defined but never used.","'useCamera' is defined but never used.","'PerspectiveCamera' is defined but never used.","'useAtom' is defined but never used.","'facingAtom' is assigned a value but never used.","'Y' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'downHandler' and 'upHandler'. Either include them or remove the dependency array.","ArrayExpression",["92"],"'auto' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'snap.items'. Either include it or remove the dependency array.",["93"],"no-sequences","Unexpected use of comma operator.","SequenceExpression","unexpectedCommaExpression",["90"],["91"],"no-global-assign","no-unsafe-negation",{"desc":"94","fix":"95"},{"desc":"96","fix":"97"},"Update the dependencies array to be: [downHandler, upHandler]",{"range":"98","text":"99"},"Update the dependencies array to be: [hovered, snap.items]",{"range":"100","text":"101"},[862,864],"[downHandler, upHandler]",[2882,2891],"[hovered, snap.items]"]